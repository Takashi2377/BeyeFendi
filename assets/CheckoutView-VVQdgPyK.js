import{_ as p,a as c,m,r as u,o,c as r,d as i,b as t,h as y,F as f,j as g,t as e,l as b,w as k,e as L}from"./index-2x8rP7w5.js";import{u as P}from"./toastMessage-9czl95KY.js";import{c as _}from"./cartStore-RKMTKCQC.js";import"./sweetalert2.all-6XatNS0t.js";const v={data(){return{orderId:"",isLoading:!1,order:{user:{}}}},methods:{...c(P,["pushMessage"]),...c(_,["payOrder","getOrder"])},computed:{...m(_,["isLoadingP","orderP"])},watch:{isLoadingP(){this.isLoading=this.isLoadingP},orderP(){this.order=this.orderP,this.order.is_paid=this.orderP.is_paid}},created(){this.orderId=this.$route.params.orderId,this.getOrder(this.orderId)}},x={key:0,class:"container"},w={class:"my-6 row justify-content-center"},V={class:"table align-middle"},N=t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",{class:"text-end"},"單價")])],-1),I={class:"text-end"},M={colspan:"3",class:"text-end"},S={class:"table"},C=t("th",{width:"100"},"Email",-1),O=t("th",null,"姓名",-1),T=t("th",null,"收件人電話",-1),B=t("th",null,"收件人地址",-1),j=t("th",null,"付款狀態",-1),z={key:0},E={key:1,class:"text-success"},F={key:0,class:"text-end"},R=t("button",{type:"submit",class:"btn btn-danger"},"確認付款",-1),q=[R],A={key:1,class:"container"},D={class:"d-flex flex-column align-items-center is-paid"},G=t("i",{class:"bi bi-check-circle"},null,-1),H=t("h5",{class:"my-3 text-dark"},"付款完成!",-1),J={key:2,class:"container"};function K(n,l,Q,U,s,W){const a=u("VueLoading"),h=u("RouterLink");return!n.orderP.is_paid&&!n.isLoadingP?(o(),r("div",x,[i(a,{active:s.isLoading,"z-index":1060},null,8,["active"]),t("div",w,[t("form",{class:"col-md-6 my-1",onSubmit:l[0]||(l[0]=y(d=>n.payOrder(s.orderId),["prevent"]))},[t("table",V,[N,t("tbody",null,[(o(!0),r(f,null,g(s.order.products,d=>(o(),r("tr",{key:d.id},[t("td",null,e(d.product.title),1),t("td",null,e(d.qty)+" / "+e(d.product.unit),1),t("td",I,"NT$ "+e(Math.floor(d.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",M," 總計 : NT$ "+e(Math.floor(s.order.total)),1)])])]),t("table",S,[t("tbody",null,[t("tr",null,[C,t("td",null,e(s.order.user.email),1)]),t("tr",null,[O,t("td",null,e(s.order.user.name),1)]),t("tr",null,[T,t("td",null,e(s.order.user.tel),1)]),t("tr",null,[B,t("td",null,e(s.order.user.address),1)]),t("tr",null,[j,t("td",null,[n.orderP.is_paid?(o(),r("span",E,"付款完成")):(o(),r("span",z,"尚未付款"))])])])]),n.orderP.is_paid?b("",!0):(o(),r("div",F,q))],32)])])):n.orderP.is_paid&&!n.isLoadingP?(o(),r("div",A,[t("div",D,[G,H,i(h,{type:"button",class:"btn btn-secondary my-3 px-5 py-2",to:"/products"},{default:k(()=>[L(" 繼續選購 ")]),_:1})])])):(o(),r("div",J,[i(a,{active:!0,"z-index":1060})]))}const tt=p(v,[["render",K]]);export{tt as default};
